  <!DOCTYPE html>
  <html dir="rtl" lang="ar">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù†</title>
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
      <style>
          @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
          
          body {
              font-family: 'Tajawal', sans-serif;
              background-color: #f8f4e8;
          }
          
          .timer-bar {
              transition: width 1s linear;
          }
          
          .option {
              transition: all 0.3s ease;
              cursor: pointer;
          }
          
          .option:hover {
              transform: translateY(-2px);
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
          }
          
          .option-correct {
              background-color: #4ade80 !important;
              color: white;
          }
          
          .option-wrong {
              background-color: #f87171 !important;
              color: white;
          }
          
          .disabled {
              pointer-events: none;
          }

          .winner-card {
              transition: transform 0.3s ease;
          }
          
          .winner-card:hover {
              transform: translateY(-5px);
          }

          .leaderboard-tab.active {
              background-color: #3b82f6;
              color: white;
          }

          @keyframes slideIn {
              from {
                  transform: translateY(-20px);
                  opacity: 0;
              }
              to {
                  transform: translateY(0);
                  opacity: 1;
              }
          }

          .animate-slideIn {
              animation: slideIn 0.5s ease forwards;
          }
      </style>
  </head>
  <body class="min-h-screen bg-gradient-to-b from-blue-50 to-blue-100">
      <div class="container mx-auto px-4 py-8">
          <!-- Ø´Ø§Ø´Ø© ØºÙŠØ± Ù…ØªØ§Ø­ -->
          <div id="unavailable-screen" class="hidden animate-slideIn">
              <div class="text-center">
                  <div class="bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto">
                      <h2 class="text-2xl font-bold text-red-600 mb-4">Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                      <p class="text-gray-600 mb-4">Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©:</p>
                      <ul class="text-gray-600 mb-6">
                          <li>Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©: 2:00 - 2:30 ØµØ¨Ø§Ø­Ø§Ù‹</li>
                          <li>Ø§Ù„Ù†ØªØ§Ø¦Ø¬: 2:30 ØµØ¨Ø§Ø­Ø§Ù‹</li>
                      </ul>
                      <p id="next-time" class="text-blue-600 font-bold"></p>
                  </div>
              </div>

              <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ† Ø­ØªÙ‰ Ø®Ø§Ø±Ø¬ ÙˆÙ‚Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© -->
              <div class="mt-8">
                  <div class="bg-white rounded-lg shadow-lg p-6 max-w-4xl mx-auto">
                      <h2 class="text-2xl font-bold text-blue-600 mb-6 text-center">Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†</h2>
                      
                      <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ -->
                      <div class="flex justify-center gap-4 mb-6">
                          <button class="leaderboard-tab active px-6 py-2 rounded-full" data-period="daily">Ø§Ù„ÙŠÙˆÙ…</button>
                          <button class="leaderboard-tab px-6 py-2 rounded-full" data-period="weekly">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</button>
                          <button class="leaderboard-tab px-6 py-2 rounded-full" data-period="monthly">Ø§Ù„Ø´Ù‡Ø±</button>
                      </div>

                      <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ† -->
                      <div id="leaderboard-display"></div>
                  </div>
              </div>
          </div>

          <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© -->
          <div id="quiz-container" class="hidden animate-slideIn">
              <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
              <div id="welcome-screen">
                  <div class="text-center">
                      <h1 class="text-4xl font-bold text-blue-600 mb-6">Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù†</h1>
                      <div class="bg-white rounded-lg shadow-lg p-8 max-w-md mx-auto">
                          <h2 class="text-2xl font-semibold mb-4">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù†</h2>
                          <p class="text-gray-600 mb-6">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø¨Ø¯Ø¡</p>
                          <input type="text" id="player-name" 
                                 class="w-full p-3 border rounded-lg mb-4 text-center" 
                                 placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
                          <button id="start-btn" 
                                  class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-300">
                              Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©
                          </button>
                      </div>
                  </div>
              </div>

              <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
              <div id="quiz-screen" class="hidden">
                  <div class="bg-white rounded-lg shadow-lg p-8 max-w-2xl mx-auto">
                      <div class="flex justify-between items-center mb-6">
                          <div class="text-xl font-bold text-blue-600">Ø§Ù„Ø³Ø¤Ø§Ù„: <span id="question-number">1</span>/3</div>
                          <div class="text-xl font-bold text-blue-600">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
                      </div>
                      
                      <div class="relative w-full h-2 bg-gray-200 rounded-full mb-4">
                          <div id="timer-bar" class="timer-bar absolute top-0 left-0 h-full bg-blue-600 rounded-full"></div>
                      </div>
                      
                      <div class="text-center mb-2">
                          <span id="timer" class="text-2xl font-bold text-blue-600">10</span>
                      </div>

                      <div id="question" class="text-xl font-semibold mb-6 text-center"></div>
                      
                      <div id="options" class="space-y-4">
                          <!-- Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø³ØªØ¶Ø§Ù Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                      </div>
                  </div>
              </div>
          </div>

          <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
          <div id="results-container" class="hidden animate-slideIn">
              <div class="text-center mb-8">
                  <h1 class="text-4xl font-bold text-blue-600 mb-2">Ù†ØªØ§Ø¦Ø¬ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù†</h1>
                  <p class="text-gray-600" id="date-time"></p>
              </div>

              <!-- Ø§Ù„ÙØ§Ø¦Ø²ÙˆÙ† -->
              <div class="grid md:grid-cols-3 gap-6 mb-8">
                  <div class="winner-card bg-white rounded-lg shadow-lg p-6 text-center order-2 md:order-1">
                      <div class="text-3xl mb-2">ğŸ¥ˆ</div>
                      <h3 class="text-xl font-bold text-gray-800 mb-2">Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø«Ø§Ù†ÙŠ</h3>
                      <p class="text-2xl font-bold text-blue-600 mb-2" id="second-place-name">-</p>
                      <p class="text-lg text-gray-600" id="second-place-score">Ø§Ù„Ù†Ù‚Ø§Ø·: -</p>
                  </div>

                  <div class="winner-card bg-white rounded-lg shadow-lg p-6 text-center order-1 md:order-2 transform scale-105">
                      <div class="text-4xl mb-2">ğŸ†</div>
                      <h3 class="text-2xl font-bold text-gray-800 mb-2">Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø£ÙˆÙ„</h3>
                      <p class="text-3xl font-bold text-blue-600 mb-2" id="first-place-name">-</p>
                      <p class="text-xl text-gray-600" id="first-place-score">Ø§Ù„Ù†Ù‚Ø§Ø·: -</p>
                  </div>

                  <div class="winner-card bg-white rounded-lg shadow-lg p-6 text-center order-3">
                      <div class="text-3xl mb-2">ğŸ¥‰</div>
                      <h3 class="text-xl font-bold text-gray-800 mb-2">Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø«Ø§Ù„Ø«</h3>
                      <p class="text-2xl font-bold text-blue-600 mb-2" id="third-place-name">-</p>
                      <p class="text-lg text-gray-600" id="third-place-score">Ø§Ù„Ù†Ù‚Ø§Ø·: -</p>
                  </div>
              </div>

              <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
              <div class="bg-white rounded-lg shadow-lg p-6">
                  <h2 class="text-2xl font-bold text-gray-800 mb-4">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
                  <div class="overflow-x-auto">
                      <table class="w-full">
                          <thead>
                              <tr class="bg-gray-50">
                                  <th class="px-6 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„Ù…Ø±ÙƒØ²</th>
                                  <th class="px-6 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„Ø§Ø³Ù…</th>
                                  <th class="px-6 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                                  <th class="px-6 py-3 text-right text-sm font-semibold text-gray-600">Ø§Ù„ÙˆÙ‚Øª</th>
                              </tr>
                          </thead>
                          <tbody id="results-table">
                              <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                          </tbody>
                      </table>
                  </div>
              </div>
          </div>
      </div>

      <script>
          // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
          const leaderboardData = {
              daily: [],
              weekly: [],
              monthly: []
          };

          // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
          function initializeLeaderboardData() {
              // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ…
              leaderboardData.daily = [
                  { name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯", score: 280, time: 22.5 },
                  { name: "Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯", score: 300, time: 20.1 },
                  { name: "Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡", score: 260, time: 23.8 }
              ];

              // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹
              leaderboardData.weekly = [
                  { name: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ", score: 295, time: 21.2 },
                  { name: "ÙØ§Ø·Ù…Ø© ÙŠÙˆØ³Ù", score: 285, time: 22.3 },
                  { name: "Ø¹Ù…Ø± Ø®Ø§Ù„Ø¯", score: 275, time: 23.1 }
              ];

              // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ù‡Ø±
              leaderboardData.monthly = [
                  { name: "Ù†ÙˆØ±Ø© Ø³Ø¹Ø¯", score: 298, time: 20.8 },
                  { name: "Ø³Ù„Ø·Ø§Ù† Ù…Ø­Ù…Ø¯", score: 290, time: 21.5 },
                  { name: "Ø±ÙŠÙ… Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡", score: 288, time: 21.9 }
              ];
          }

          // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
          function updateLeaderboardDisplay(period = 'daily') {
              const results = leaderboardData[period];
              const leaderboardDisplay = document.getElementById('leaderboard-display');
              
              let html = `
                  <div class="grid md:grid-cols-3 gap-4 mb-6">
                      ${results.slice(0, 3).map((result, index) => `
                          <div class="winner-card bg-white rounded-lg shadow p-4 text-center">
                              <div class="text-3xl mb-2">${index === 0 ? 'ğŸ†' : index === 1 ? 'ğŸ¥ˆ' : 'ğŸ¥‰'}</div>
                              <h3 class="text-lg font-bold text-gray-800">${result.name}</h3>
                              <p class="text-blue-600">Ø§Ù„Ù†Ù‚Ø§Ø·: ${result.score}</p>
                              <p class="text-gray-600">Ø§Ù„ÙˆÙ‚Øª: ${result.time.toFixed(1)} Ø«Ø§Ù†ÙŠØ©</p>
                          </div>
                      `).join('')}
                  </div>
                  <div class="overflow-x-auto">
                      <table class="w-full">
                          <thead>
                              <tr class="bg-gray-50">
                                  <th class="px-4 py-2">Ø§Ù„Ù…Ø±ÙƒØ²</th>
                                  <th class="px-4 py-2">Ø§Ù„Ø§Ø³Ù…</th>
                                  <th class="px-4 py-2">Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                                  <th class="px-4 py-2">Ø§Ù„ÙˆÙ‚Øª</th>
                              </tr>
                          </thead>
                          <tbody>
                              ${results.map((result, index) => `
                                  <tr class="${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}">
                                      <td class="px-4 py-2">${index + 1}</td>
                                      <td class="px-4 py-2">${result.name}</td>
                                      <td class="px-4 py-2">${result.score}</td>
                                      <td class="px-4 py-2">${result.time.toFixed(1)} Ø«Ø§Ù†ÙŠØ©</td>
                                  </tr>
                              `).join('')}
                          </tbody>
                      </table>
                  </div>
              `;
              
              leaderboardDisplay.innerHTML = html;
          }

          // Ø¥Ø¶Ø§ÙØ© Ù†ØªÙŠØ¬Ø© Ø¬Ø¯ÙŠØ¯Ø©
          function addNewResult(result) {
              leaderboardData.daily.push(result);
              leaderboardData.daily.sort((a, b) => b.score - a.score || a.time - b.time);
              updateLeaderboardDisplay('daily');
          }

          // ØªÙ‡ÙŠØ¦Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ
          function initializeLeaderboardTabs() {
              const tabs = document.querySelectorAll('.leaderboard-tab');
              tabs.forEach(tab => {
                  tab.addEventListener('click', () => {
                      tabs.forEach(t => t.classList.remove('active'));
                      tab.classList.add('active');
                      updateLeaderboardDisplay(tab.dataset.period);
                  });
              });
          }

          const elements = {
              unavailableScreen: document.getElementById('unavailable-screen'),
              quizContainer: document.getElementById('quiz-container'),
              resultsContainer: document.getElementById('results-container'),
              welcomeScreen: document.getElementById('welcome-screen'),
              quizScreen: document.getElementById('quiz-screen'),
              playerNameInput: document.getElementById('player-name'),
              startButton: document.getElementById('start-btn'),
              questionNumber: document.getElementById('question-number'),
              score: document.getElementById('score'),
              timer: document.getElementById('timer'),
              timerBar: document.getElementById('timer-bar'),
              question: document.getElementById('question'),
              optionsContainer: document.getElementById('options'),
              nextTime: document.getElementById('next-time'),
              dateTime: document.getElementById('date-time')
          };

          const gameState = {
              playerName: '',
              currentQuestion: 0,
              score: 0,
              timer: null,
              timeLeft: 10,
              questions: [
                  {
                      question: 'Ù…Ø§ Ù‡Ùˆ Ø£ÙˆÙ„ Ø´Ù‡Ø± ÙÙŠ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ù‡Ø¬Ø±ÙŠØŸ',
                      options: ['Ù…Ø­Ø±Ù…', 'Ø±Ù…Ø¶Ø§Ù†', 'Ø´ÙˆØ§Ù„', 'Ø±Ø¬Ø¨'],
                      correct: 0
                  },
                  {
                      question: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø±ÙƒØ¹Ø§Øª ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ØŸ',
                      options: ['8 Ø±ÙƒØ¹Ø§Øª', '20 Ø±ÙƒØ¹Ø©', '12 Ø±ÙƒØ¹Ø©', '6 Ø±ÙƒØ¹Ø§Øª'],
                      correct: 1
                  },
                  {
                      question: 'ÙÙŠ Ø£ÙŠ Ù„ÙŠÙ„Ø© Ù…Ù† Ø±Ù…Ø¶Ø§Ù† ØªÙØªØ­Ø±Ù‰ Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±ØŸ',
                      options: ['Ù„ÙŠÙ„Ø© 23', 'Ù„ÙŠÙ„Ø© 27', 'Ù„ÙŠÙ„Ø© 29', 'Ù„ÙŠÙ„Ø© 21'],
                      correct: 1
                  }
              ],
              questionStartTime: 0,
              totalTime: 0,
              questionTimes: [],
              answers: []
          };

          function checkAvailability() {
              const now = new Date();
              const hours = now.getHours();
              const minutes = now.getMinutes();
              
              elements.unavailableScreen.classList.add('hidden');
              elements.quizContainer.classList.add('hidden');
              elements.resultsContainer.classList.add('hidden');

              if (hours === 2) {
                  if (minutes < 30) {
                      elements.quizContainer.classList.remove('hidden');
                  } else {
                      elements.resultsContainer.classList.remove('hidden');
                      updateResults();
                  }
              } else {
                  elements.unavailableScreen.classList.remove('hidden');
                  updateNextTime();
              }
          }

          function updateNextTime() {
              const now = new Date();
              const next = new Date();
              next.setHours(2, 0, 0, 0);
              if (now.getHours() >= 2) {
                  next.setDate(next.getDate() + 1);
              }
              const diff = next - now;
              const hours = Math.floor(diff / (1000 * 60 * 60));
              const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
              elements.nextTime.textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©: ${hours} Ø³Ø§Ø¹Ø© Ùˆ ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
          }

          function updateDateTime() {
              const now = new Date();
              const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
              const timeOptions = { hour: '2-digit', minute: '2-digit' };
              const dateStr = now.toLocaleDateString('ar-SA', dateOptions);
              const timeStr = now.toLocaleTimeString('ar-SA', timeOptions);
              if (elements.dateTime) {
                  elements.dateTime.textContent = `${dateStr} - ${timeStr}`;
              }
          }

          elements.startButton?.addEventListener('click', () => {
              const playerName = elements.playerNameInput.value.trim();
              if (!playerName) {
                  alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ');
                  return;
              }
              gameState.playerName = playerName;
              startQuiz();
          });

          function startQuiz() {
              elements.welcomeScreen.classList.add('hidden');
              elements.quizScreen.classList.remove('hidden');
              showQuestion();
          }

          function showQuestion() {
              const question = gameState.questions[gameState.currentQuestion];
              elements.questionNumber.textContent = gameState.currentQuestion + 1;
              elements.question.textContent = question.question;
              elements.optionsContainer.innerHTML = '';
              
              question.options.forEach((option, index) => {
                  const button = document.createElement('button');
                  button.className = 'option w-full p-4 text-right bg-white border rounded-lg hover:bg-blue-50';
                  button.textContent = option;
                  button.onclick = () => handleAnswer(index);
                  elements.optionsContainer.appendChild(button);
              });

              gameState.questionStartTime = Date.now();
              startTimer();
          }

          function startTimer() {
              gameState.timeLeft = 10;
              elements.timer.textContent = gameState.timeLeft;
              elements.timerBar.style.width = '100%';
              
              clearInterval(gameState.timer);
              gameState.timer = setInterval(() => {
                  gameState.timeLeft--;
                  elements.timer.textContent = gameState.timeLeft;
                  elements.timerBar.style.width = `${(gameState.timeLeft / 10) * 100}%`;
                  
                  if (gameState.timeLeft <= 0) {
                      handleAnswer(-1);
                  }
              }, 1000);
          }

          function handleAnswer(selectedOption) {
              clearInterval(gameState.timer);
              const answerTime = (Date.now() - gameState.questionStartTime) / 1000;
              gameState.questionTimes.push(answerTime);
              
              const question = gameState.questions[gameState.currentQuestion];
              const isCorrect = selectedOption === question.correct;
              
              let points = 0;
              if (isCorrect) {
                  if (answerTime <= 3) points = 100;
                  else if (answerTime <= 5) points = 80;
                  else if (answerTime <= 7) points = 60;
                  else points = 40;
              }
              
              gameState.score += points;
              gameState.totalTime += answerTime;
              
              const options = elements.optionsContainer.children;
              if (selectedOption >= 0) {
                  options[selectedOption].classList.add(isCorrect ? 'option-correct' : 'option-wrong');
              }
              options[question.correct].classList.add('option-correct');
              
              Array.from(options).forEach(option => option.classList.add('disabled'));
              
              gameState.answers.push({
                  question: question.question,
                  selectedAnswer: selectedOption === -1 ? 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©' : question.options[selectedOption],
                  correctAnswer: question.options[question.correct],
                  isCorrect: isCorrect,
                  time: answerTime,
                  points: points
              });

              elements.score.textContent = gameState.score;
              
              setTimeout(() => {
                  if (gameState.currentQuestion < gameState.questions.length - 1) {
                      gameState.currentQuestion++;
                      showQuestion();
                  } else {
                      saveResults();
                  }
              }, 1500);
          }

          function saveResults() {
              const result = {
                  name: gameState.playerName,
                  score: gameState.score,
                  time: gameState.totalTime,
                  timestamp: new Date().toISOString()
              };

              // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
              addNewResult(result);
              
              // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ø­ÙØ¸ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
              setTimeout(() => {
                  location.reload();
              }, 2000);
          }

          function updateResults() {
              const results = leaderboardData.daily;
              
              // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ†
              if (results.length > 0) {
                  document.getElementById('first-place-name').textContent = results[0].name;
                  document.getElementById('first-place-score').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${results[0].score}`;
              }
              if (results.length > 1) {
                  document.getElementById('second-place-name').textContent = results[1].name;
                  document.getElementById('second-place-score').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${results[1].score}`;
              }
              if (results.length > 2) {
                  document.getElementById('third-place-name').textContent = results[2].name;
                  document.getElementById('third-place-score').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${results[2].score}`;
              }

              // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
              const tableBody = document.getElementById('results-table');
              tableBody.innerHTML = '';
              results.forEach((result, index) => {
                  const row = document.createElement('tr');
                  row.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';
                  row.innerHTML = `
                      <td class="px-6 py-4 text-sm text-gray-800">${index + 1}</td>
                      <td class="px-6 py-4 text-sm text-gray-800">${result.name}</td>
                      <td class="px-6 py-4 text-sm text-gray-800">${result.score}</td>
                      <td class="px-6 py-4 text-sm text-gray-800">${result.time.toFixed(1)} Ø«Ø§Ù†ÙŠØ©</td>
                  `;
                  tableBody.appendChild(row);
              });
          }

          // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
          initializeLeaderboardData();
          initializeLeaderboardTabs();
          checkAvailability();
          updateDateTime();
          
          // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
          setInterval(() => {
              checkAvailability();
              updateDateTime();
          }, 60000);
      </script>
  </body>
  </html>
